{% load staticfiles %}
<!DOCTYPE html>

<html>

<head>
    <link rel="shortcut icon" href="{% static 'images/favicon.ico' %}" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>首页</title>

    <link rel="stylesheet" href="{% static 'css/animate.css' %}" />
    <link rel="stylesheet" href="{% static 'css/semantic.css' %}" media="screen" title="no title" charset="utf-8">
    <link rel="stylesheet" href="{% static 'css/list_custom.css' %}" media="screen" title="no title" charset="utf-8">
    <!-- <link rel="stylesheet" href="{% static 'css/style.css' %}" media="screen" title="no title" charset="utf-8"> -->

    <script src="{% static 'js/vue1.js' %}"></script>
    <script src="{% static 'js/reqwest.js' %}"></script>
    <script src="{% static 'js/js.cookie.js' %}"></script>
    <script src="{% static 'js/yundong.js' %}"></script>

    <script>
    window.onload=function(){

        vm = new Vue({
           el:"#app",
           data:{
               //悬浮框弹出动画
               fadeIn:"",
               fade:"",
               //分类
               fenLei:"",
               //与登陆注册相关的数据
                invalidUser:"手机号码不合法",
                endInvalidUser:"号码已注册",
                username:"",
                password:"",
                re_password:"",
                endCheckRe:1,

                //分页用的数据
                pages:"",
                this_page:1,
                //搜索词语
                searchword:"",



                //切换分类用
                current:1,
                //个人信息数据和文章列表
                userinfo:"",
                video_list:[],
                //定时器
                timer:null,
                //动态
                dongTaiLst:[],
                //评论赞
                pingLunZanLst:[],
                //评论回复
                pingLunLst:[],
                //文章评论
                articlePingLunLst:[],
                //赞动态列表
                zanLst:[],
                //私信列表
                siXinLst:[],

                modal:{
                //动态展示
                dongTaiShow:false,
                //回复动态展示
                pingLunShow:false,
                //赞动态展示
                zanShow:false,
                //回复提示
                tiShi:false,
                // 私信
                siXinShow:false,
                //与注册登陆相关的数据

                dimmerShow:false,
                show:false,
                lg_show:true,
                lt_show:false,

                inUsernameCheck:false,
                endInUsernameCheck:false,
                usernameCheck:false,
                error_show:false,
                right_show:false,
                error_show1:false,
                error_show2:false,
                loginCheck:false,

                regi_show:false,
                login_show:false,

                //显示或不显示悬浮框
                info:false,
               },
           },

   methods:{
       //登陆注册用的函数
       unSignUp:function() {
           this.modal.login_show=false;
           this.modal.dimmerShow=false;
           this.modal.regi_show=false;
       },

       signUp:function() {
           this.modal.login_show=true;
           this.modal.dimmerShow=true;
       },

       //动态数目清零
       zanNumQingLing:function() {
           var id=4
           reqwest({
             url:'/api/changeInfo/'+id,
             type:'json',
             method:'put',
             headers:Cookies.get('token')? {'Authorization': 'Token ' + Cookies.get('token')}:{},
             success:function(resp){
               console.log(resp.status);
             }
           })
       },

       //动态数目清零
       pingLunNumQingLing:function() {
           var id=3
           reqwest({
             url:'/api/changeInfo/'+id,
             type:'json',
             method:'put',
             headers:Cookies.get('token')? {'Authorization': 'Token ' + Cookies.get('token')}:{},
             success:function(resp){
               console.log(resp.status);
             }
           })
       },

       //动态数目清零
       dongTaiNumQingLing:function() {
           var id=1
           reqwest({
             url:'/api/changeInfo/'+id,
             type:'json',
             method:'put',
             headers:Cookies.get('token')? {'Authorization': 'Token ' + Cookies.get('token')}:{},
             success:function(resp){
               console.log(resp.status);
             }
           })
       },
       //私信数目清零
       siXinNumQingLing:function() {
           var id=2
           reqwest({
             url:'/api/changeInfo/'+id,
             type:'json',
             method:'put',
             headers:Cookies.get('token')? {'Authorization': 'Token ' + Cookies.get('token')}:{},
             success:function(resp){
               console.log(resp.status);

             }
           })
       },
        //删除私信
       deleteSiXin:function(id) {
           reqwest({
             url:'/api/siXin/'+id,
             type:'json',
             method:'delete',
             headers:Cookies.get('token')? {'Authorization': 'Token ' + Cookies.get('token')}:{},
             success:function(resp){
               console.log(resp.status);
             }
           })
       },
       //回复私信
       huiFuSiXin:function(nickname,content,yuanContent,id) {
           var self=this
           reqwest({
             url:'/api/siXin/'+id,
             type:'json',
             method:'post',
             data:{content:nickname+" 回复 你的私信//"+yuanContent+"//"+content},
             headers:Cookies.get('token')? {'Authorization': 'Token ' + Cookies.get('token')}:{},
             success:function(resp){
               console.log(resp.status);
               self.modal.tiShi=true;
               setTimeout(function(){
                   self.fade='fadeOut'
               },2000)
               self.timer=setTimeout(function(){
                   self.modal.tiShi=false;
               },4000)
             }
           })
       },

       //加载个人信息
              readinfo:function(){
                  var self=this;
                  reqwest({
                      url:'/api/theuser/',
                      type:'json',
                      method:'get',
                      headers:Cookies.get('token')? {'Authorization': 'Token ' + Cookies.get('token')}:{},
                      success:function(resp){
                        //   resp.myGetSixin.sort(reverse=true);
                          for(var i=0;i<resp.siXin.length;i++) {
                              resp.siXin[i]['huiFu']="";
                              resp.siXin[i]['inputApearOride']=false;
                              resp.siXin[i]['huiFuBt']=false;
                              resp.siXin[i]['quXiaoBt']=false;
                              resp.siXin[i]['siXinApearOrHide']=false;
                              resp.siXin[i]['qurenShow']=false;
                          }
                          self.siXinLst=resp.siXin;
                          self.userinfo = resp.info;
                          self.modalSwitch_lg_lt();
                      }
                  })
              },

              //加载动态信息
                     dongTai:function(){
                         var self=this;
                         reqwest({
                             url:'/api/dongTai/',
                             type:'json',
                             method:'get',
                             headers:Cookies.get('token')? {'Authorization': 'Token ' + Cookies.get('token')}:{},
                             success:function(resp){
                                 self.dongTaiLst = resp;
                             }
                         })
                     },

             //加载评论动态信息
                    pingLun:function(){
                        var self=this;
                        reqwest({
                            url:'/api/pingLun/',
                            type:'json',
                            method:'get',
                            headers:Cookies.get('token')? {'Authorization': 'Token ' + Cookies.get('token')}:{},
                            success:function(resp){
                                self.pingLunLst = resp;
                            }
                        })
                    },

                    //加载评论动态信息
                           articlePingLun:function(){

                               var self=this;
                               reqwest({
                                   url:'/api/articlePingLun/',
                                   type:'json',
                                   method:'get',
                                   headers:Cookies.get('token')? {'Authorization': 'Token ' + Cookies.get('token')}:{},
                                   success:function(resp){

                                       self.articlePingLunLst = resp;
                                   }
                               })
                           },

                    //加载赞动态信息
                           zan:function(){
                               var self=this;
                               reqwest({
                                   url:'/api/zan/',
                                   type:'json',
                                   method:'get',
                                   headers:Cookies.get('token')? {'Authorization': 'Token ' + Cookies.get('token')}:{},
                                   success:function(resp){
                                       self.zanLst = resp;
                                   }
                               })
                           },

                           //加载赞动态信息
                                  pingLunZan:function(){
                                      var self=this;
                                      reqwest({
                                          url:'/api/pingLunZan/',
                                          type:'json',
                                          method:'get',
                                          headers:Cookies.get('token')? {'Authorization': 'Token ' + Cookies.get('token')}:{},
                                          success:function(resp){
                                              self.pingLunZanLst = resp;
                                          }
                                      })
                                  },


       //个人资料

       prePeopleDetail:function(id) {
           if(Cookies.get('token')) {
               this.peopleDetail(id)
           }
           else {
               this.signUp();
           }
       },


       peopleDetail:function (id) {
           Cookies.set('peopleId', id);
           window.location.href="/geRenXingXi/";
               },

       // 用户注册登陆相关函数
       affRegister: function() {
            if(this.modal.right_show==true&&this.modal.error_show2==true&&this.modal.usernameCheck==true){
                this.register();
            }
       },

       checkRePassword:function(){
           if(this.password==this.re_password) {
               this.modal.right_show=true;
           }
           else {
               this.modal.error_show=true;

           }
       },

       rePswChange:function() {
             this.modal.right_show=false;
             this.modal.error_show=false;
       },

       passwordChange:function(){
           this.modal.error_show1=false;
           this.modal.error_show2=false;
       },

       checkPassword:function(){
           if (this.password==""||this.password.length<6) {
               this.modal.error_show1=true;

           }
           else {
               this.modal.error_show2=true;

           }

       },

       userChange:function(){
           this.modal.usernameCheck=false;
           this.modal.inUsernameCheck=false;
           this.modal.endInUsernameCheck=false;
       },
       checkUsername: function() {
           if(this.username!=""){
               var re=/^0?(13[0-9]|15[012356789]|18[0236789]|14[57])[0-9]{8}$/;
               if(re.test(this.username)) {
                   this.endCheck();
                   if(this.endCheckRe==1){
                       this.modal.usernameCheck=true;

                   }
                   else {
                       this.modal.endInUsernameCheck=true;

                   }

               }
               else {
                   this.modal.inUsernameCheck=true;

               }
           }
       },
       endCheck:function(){
           var self=this;
           reqwest({
             url:'/api/endCheck/',
             type:'json',
             method:'post',
             data:{username:self.username},
             success:function(resp){
               self.endCheckRe = resp.result;
             }
           })
       },

       register:function(){
           var self = this;
           reqwest({
               url:'/api/register/',
               type:'json',
               method:'post',
               data:{
                   username:self.username,
                   password:self.password,
               },
               success:function (resp) {
                   self.clear();
                   self.modalSwitch_rigeser_login();
               },

       })
   },

   logIn:function () {
       var self = this;
       reqwest({
           url:'/api/token-auth',
           type:'json',
           method:'post',
           data:{
               username:self.username,
               password:self.password,
           },
           success:function (resp) {
               console.log(resp);
               Cookies.set('token',resp.token);
               self.getData();
               self.readinfo();
               // self.readinfo();
               self.unSignUp();
               // self.modalSwitch_lg_lt();
           },
           error:function(err){
               console.log(err);
               self.modal.loginCheck=true;
           },

       })
   },

   modalSwitch_lg_lt:function () {
       this.modal.lg_show=!this.modal.lg_show
       this.modal.lt_show=!this.modal.lt_show
  },


  // modalSwitch:function () {
  // this.modal.show = !this.modal.show
  // },

  modalSwitch_rigeser_login:function () {
  this.modal.regi_show = !this.modal.regi_show
  this.modal.login_show = !this.modal.login_show
  },
  clear:function(){
      self.username="";
      self.password="";
  },




// 资料修改悬浮框
       infoShwich1:function(){
           if(this.timer){
               clearTimeout(this.timer);
           }

           this.fadeIn='zoomIn';
           this.modal.info=true
       },
       infoShwich2:function(){
           var self =this;
           self.timer=setTimeout(function(){
               self.fadeIn='zoomOut';
               setTimeout(function(){
                   self.modal.info=false
               },180)

           },300)

       },


//分页相关函数
       leftcaret_color:function(){
            if(this.this_page > 1){
              return "red"
            }
            else{
              return ""
            }
          },

          rightcaret_color:function(){
            if(this.this_page < this.pages){
              return "red"
            }
            else{
              return ""
            }
          },

          previous_disabled_status:function(){
            if(this.this_page > 1){
              return ""
            }
            else{
              return "disabled"
            }
          },

          next_disabled_status:function(){
            if(this.this_page < this.pages){
              return ""
            }
            else{
              return "disabled"
            }
          },

          pagenum_active_status:function(page){
          if(this.this_page == page){
            return "active"
          }
          else{
            return ""
          }
        },

        pagenum_color:function(page){
           if(this.this_page == page){
             return "background-color: red; color:white"
           }
           else{
             return ""
           }
         },


         update_page:function(page){
           var self = this;
        //    self.likeCount=[];
           if(page > this.pages){
             page = this.pages;
           };
           if(page < 1){
             page = 1;
           }
           self.this_page = page;
           reqwest({
             url:'/api/video/?page='+page,
             type:'json',
             method:'get',
             success:function(resp){
               self.video_list = resp.video_list;
             }
           })
         },
//获取数据的接口
         getData:function (fenLei) {
             var self = this;
             reqwest({
                 url:'/api/video/?page='+self.this_page+'&fenLei='+fenLei,
                 type:'json',
                 method:'get',
                 success:function (resp) {
                     console.log(resp.status)
                     self.video_list = resp.video_list;
                     self.pages = resp.pages;
                 },
             })
         },


//跳转到搜索结果页面
       searchbutton:function(){
           if(this.searchword!=""){
               if(Cookies.get('token')){
                   var tag=this.searchword;
                   Cookies.set('searchword', tag);
                   window.location.href="/searchpage/";
               }
               else {
                   this.signUp();
               }
           }
       },
//跳转到资料修改页面
       inFopage:function(){
           if(Cookies.get('token')){
               window.location.href="/myinfo/";
           }
           else {
               this.modal.show=true;
           }

       },
//文章详情
       detailCard:function (id) {
               Cookies.set('video_id', id);
               window.location.href="/detail/";
               },

//退出登陆
       logOut:function() {
           Cookies.remove('token',this.token);
           this.modalSwitch_lg_lt();
           this.getData();
           this.userinfo="";
           this.signUp();
       },


//分类导航栏样式
activeone:function (id) {
   if(this.current == id){
       return 'active'
   }else{
       return ''
   }
},

choicecategory:function (cho,id) {
   if(cho=='all') {
       this.getData('all')
   }
   else if (cho=='new') {
       this.getData('new')
   }
   else {
       this.getData('editor')
   }
   this.current = id;
   },


//跳转到写文章页面
write:function(){
    if(Cookies.get('token')){
        window.location.href="/writeAtc/";
    }
    else {
        this.signUp();
    }
},


// startMove:function() {
//     var oDiv=document.getElementById('div1')
//     clearInterval(timer);
//     timer=setInterval(function() {
//         var speed=1;
//         if(oDiv.offsetLeft>300) {
//             clearInterval(timer);
//         }
//         else {
//             oDiv.style.left=oDiv.offsetLeft+speed+'px';
//         }
//
//     }, 30)
// },


// startMove2:function() {
// var self=this
//     var oDiv=document.getElementById('div1')
//     clearInterval(self.timer);
//     self.timer=setInterval(function() {
//         if(oDiv.offsetLeft==-150) {
//             clearInterval(self.timer);
//         }
//         else {
//             oDiv.style.left=oDiv.offsetLeft-10+'px';
//         }
//
//     }, 30)
// },

},


   computed:{
// 分类导航过滤器
   filtered:function () {
       var self = this
           if (self.choices == "editor" ) {
               var newList =self.video_list.filter(function (vid) {
                       return vid.editors_choice == true
                   })
               return newList
           }
           else if (self.choices == "new") {
               var newList =self.video_list.filter(function (vid) {
                       return vid.id > self.video_list.length-3
                   })
               return newList
           }
           else {
               return self.video_list
           }
       },




   canScroll:function () {
       if (this.modal.show) {
           return 'unscrollable'
       }
       else if (this.modal.login_show) {
           return 'unscrollable'
       }
       else {
           return ''
       }
   },

//登陆框淡入效果
   fadeInOut:function () {
           if (this.modal.show) {
               return 'fadeIn'
           }
           else {
               return 'fadeOut'
           }
       },
},

//钩子函数，进入页面自动加载
ready:function () {
    this.getData();
    if(Cookies.get('token')){
 	this.readinfo();
}
  
},



       })

    };


</script>
    <style type="text/css">

        /*#play {
            width: 500px;
            height: 150px;
            position: relative;
            margin: 60px auto;
            border: 1px solid black;
        }

        #play ul {
            position: absolute;
            top: 0px;

        }

        #play ul img {
            position: relative;
            width: 500px;
            height: 150px;
            margin: 0px;

        }*/


        #menu {
            width: 100px;
        }

        [v-cloak] {
        display: none;
        }

        .ui.padded.modal.segment.active.siXin {
            position: absolute;
            transform: translate(0,-50%);
            top: 30%;
        }
        .ui.borderless.container.siXin.none {
            position: absolute;
            left: 50%;
            top:50%;
            transform: translate(-50%,-50%);
        }
        .comment {
            position: absolute;
        }
        .ui.padded.modal.segment.active.del {
                position: absolute;
                width:300px!important;
                min-height: 100px;
                left:110%;
                top: 40%;
                transform: translate(0, -50%);
        }
        .anniu {
            position: relative;
            left: 18%;
            margin-top: 10px;
    }

        .ui.active.modal.tiShi {
            z-index: 2;
            width: 300px;
            position: absolute;
            /*transform: translate(-50%,-50%);*/
            top: 10%;
            left: 100%;
        }

        .five.wide.column {
                background: url('/static/images/red_regi.jpg');
                background-size: cover;
                background-position: 60% 0%;
            }

        .ui.grid.divided.segment.container{
            min-height: 400px;
            width:600px !important;
            border:rgba(255, 0, 0, 0);
            position: absolute;
            left: 50%;
            top:45%;
            transform: translate(-50%,-50%);
        }

        .unscrollable{
                height:100%;
                overflow:hidden;
            }

       .ui.padded.modal.active {
           min-height: 388px;
           width:600px !important;
           border:rgba(255, 0, 0, 0);
           position: absolute;
           left: 61%;
           top:0%;
            }

        form {
            margin-top: 60px;
        }
        h1,h3,h4{
            font-family: 'Play', sans-serif !important;
        }
    </style>
</head>
<body id="app" v-cloak class="dimmable {{canScroll}}">

        <div class="ui inverted top fixed red menu borderless menu" >
        <div class="header item">
            <div class="ui image">
                <img src="\static\images\tenlogo.png" style="height:30px;width=30px; object-fit: cover" alt="">
            </div>


                {% verbatim %}

            
        </div>

        <div class="right menu">
	    <div style="right:15%" class="item">
                <div class="ui inverted icon input">
                  <input @keyup.enter="searchbutton()" v-model="searchword" type="text" placeholder="Search...">
                  <i v-on:click="searchbutton" class="circular search link icon"></i>
                </div>
            </div>
            <div class="item">
                <h5 class="ui inverted header">

                        <div  @mouseover="infoShwich1" @mouseout="infoShwich2"   v-if="userinfo.avatar" class="ui mini circular image">
                            <img src="{{userinfo.avatar}}" alt="" />
                        </div>

                        <div v-else  class="ui mini circular image">
                            <img src="\static\images\default.png" alt="" />
                        </div>
                    <span   >{{ userinfo.nickname }}</span>
                </h5>
            </div>

                <div  class="item">
                    <a v-show="modal.lg_show" v-on:click="signUp" class="ui inverted circular button">Signup/Login</a>
                    <a v-show="modal.lt_show" v-on:click="logOut" class="ui inverted circular button">Logout</a>
                </div>
        </div>
    </div>



    <div @click="modal.siXinShow=!modal.siXinShow" v-show="modal.siXinShow" class="ui dimmer animated  active"></div>
    <div v-show="modal.siXinShow"  class="ui padded modal segment active siXin">
        <i v-on:click="modal.siXinShow=!modal.siXinShow" class="icon tiny close" ></i>
        <div v-show="modal.tiShi" class="ui active modal tiShi animated {{fade}} ">
            <h4 class="ui center aligned header">回复成功</h4>
        </div>
        <h3 class="ui horizontal  divider header" style="">我的信息</h3>

        <div v-show="!userinfo.myGetSixin.length" class="ui center aligned borderless container siXin none" style="border:none" >
            <span><i style="color:#DCDCDC" class="alarm huge outline icon"></i></span>
        </br></br></br>
            <div style="color:#DCDCDC">还没有消息</div>
        </div>

        <div v-if="userinfo.myGetSixin.length" class="ui container siXin" >
            <div  class="ui segment comments" style="border:none;OVERFLOW-Y: scroll;height:300px">

                    <div  v-for="siXin in siXinLst" v-show="!siXin.siXinApearOrHide" class="comment">
                        <div v-if="siXin.emiter.avatar" class="avatar">
                            <img src="{{siXin.emiter.avatar}}"  alt="" />
                        </div>
                        <div v-else class="avatar">
                            <img src="\static\images\default.png"  alt="" />
                        </div>
                        <div class="content">
                                <a href="javascript:void(0)" class="author">{{ siXin.emiter.nickname }}</a>
                            <div class="metadata">
                                <div class="date">{{ siXin.createtime }}</div>
                            </div>
                            <p class="text" style="font-family: 'Raleway', sans-serif;">
                                {{siXin.content}}
                            </p>

                            <a v-on:click="siXin.inputApearOride=true,siXin.huiFuBt=true,siXin.quXiaoBt=true" v-show="!siXin.huiFuBt" href="javascript:void(0)">回复</a>
                            <a v-on:click="siXin.inputApearOride=false,siXin.huiFuBt=false,siXin.quXiaoBt=false" v-show="siXin.quXiaoBt"  href="javascript:void(0)">取消</a>
                            <a v-on:click="siXin.qurenShow=true"  href="javascript:;">删除</a>
                        </div>

                        <div class="ui divider"></div>
                        <div v-show="siXin.inputApearOride" class="ui action fluid input">
                            <input style="width:500px;height:35px;" @keydown.enter="huiFuSiXin(siXin.getter.nickname,siXin.huiFu,siXin.content,siXin.emiter.id),siXin.huiFu='',siXin.inputApearOride=false,siXin.huiFuBt=false,siXin.quXiaoBt=false"
                              v-model="siXin.huiFu" v-on:click="siXin.showBt=true" type="text"  placeholder="你的回复">
                             <button v-on:click="huiFuSiXin(siXin.getter.nickname,siXin.huiFu,siXin.content,siXin.emiter.id,siXin.content),siXin.huiFu='',siXin.inputApearOride=false,siXin.huiFuBt=false,siXin.quXiaoBt=false"  style="margin-left:20px" class="ui inverted  red  {{siXin.huiFu==''?'disabled':''}} button">
                             <i style="">Click</i>
                         </button>
                        </div>

                        <div v-show="siXin.qurenShow" class="ui padded modal segment active del">
                            <h4 class="ui center aligned header">确认删除吗？</h4>
                            <div class="anniu">
                                <button @click="deleteSiXin(siXin.id),siXin.siXinApearOrHide=!siXin.siXinApearOrHide,siXin.qurenShow=false" class="ui secondary button">
                                  Okay
                                </button>
                                <button v-on:click="siXin.qurenShow=false" class="ui button">
                                  Cancel
                                </button>
                            </div>
                        </div>

                    </div>
             </div>
        </div>
    </div>

    <div @click="modal.dongTaiShow=!modal.dongTaiShow" v-show="modal.dongTaiShow" class="ui dimmer animated  active"></div>
    <div v-show="modal.dongTaiShow"  class="ui padded modal segment active siXin">
        <i v-on:click="modal.dongTaiShow=!modal.dongTaiShow" class="icon tiny close" ></i>

        <h3 class="ui horizontal  divider header" style="">关注者动态</h3>

        <div v-show="!dongTaiLst.length" class="ui center aligned borderless container siXin none" style="border:none" >
            <span><i style="color:#DCDCDC" class="alarm huge outline icon"></i></span>
        </br></br></br>
            <div style="color:#DCDCDC">还没有动态</div>
        </div>

        <div v-if="dongTaiLst.length" class="ui container siXin" >
            <div  class="ui segment comments" style="border:none;OVERFLOW-Y: scroll;height:300px">

                <div  class="ui feed">
                  <div v-for="article in dongTaiLst" class="event">
                    <div class="label">
                      <img src="{{article.owner.avatar}}">
                    </div>
                    <div class="content">
                      <div class="date">
                        {{article.createtime}}
                      </div>
                      <div class="summary">
                         <a  @click="prePeopleDetail(article.owner.id)" >{{article.owner.nickname}}</a> write a article
                      </div>

                          <a v-on:click="detailCard(article.id)" class="extra text">
                            {{article.title}}
                        </a>

                    </div>
                  </div>
              </div>
             </div>
        </div>
    </div>

    <div @click="modal.zanShow=!modal.zanShow" v-show="modal.zanShow" class="ui dimmer animated fadeIn active"></div>
    <div v-show="modal.zanShow"  class="ui padded modal segment active siXin">
        <i v-on:click="modal.zanShow=!modal.zanShow" class="icon tiny close" ></i>

        <h3 class="ui horizontal  divider header" style="">动态</h3>

        <div v-if="!(zanLst.length||pingLunZanLst.length)" class="ui center aligned borderless container siXin none" style="border:none" >
            <span><i style="color:#DCDCDC" class="alarm huge outline icon"></i></span>
        </br></br></br>
            <div style="color:#DCDCDC">没有获得赞</div>
        </div>

        <div v-if="zanLst.length||pingLunZanLst.length" class="ui container siXin" >
            <div  class="ui segment comments" style="border:none;OVERFLOW-Y: scroll;height:300px">

                <div  class="ui feed">
                  <div v-for="zan in zanLst" class="event">
                    <div class="label">
                      <img src="{{zan.voter.avatar}}">
                    </div>
                    <div class="content">
                      <div class="date">
                        {{zan.createtime}}
                      </div>
                      <div class="summary">
                         <a  @click="prePeopleDetail(zan.voter.id)">{{zan.voter.nickname}}</a>  赞了你的文章
                         <a v-on:click="detailCard(zan.video.id)" class="extra text">{{zan.video.title}}</a>
                      </div>

                    </div>
                  </div>
                  <div class="ui horizontal divider">评论</div>
                  <div v-for="pingLunZan in pingLunZanLst" class="event">
                    <div class="label">
                      <img src="{{pingLunZan.voter.avatar}}">
                    </div>
                    <div class="content">
                      <div class="date">
                        {{pingLunZan.createtime}}
                      </div>
                      <div class="summary">
                         <a  @click="prePeopleDetail(pingLunZan.voter.id)">{{pingLunZan.voter.nickname}}</a>  赞了你在
                         <a v-on:click="detailCard(pingLunZan.comment.belong_to.id)" class="extra text">{{pingLunZan.comment.belong_to.title}}</a> 下的评论
                      </div>

                    </div>
                  </div>
              </div>
             </div>
        </div>
    </div>

    <div @click="modal.pingLunShow=!modal.pingLunShow" v-show="modal.pingLunShow" class="ui dimmer animated fadeIn active"></div>
    <div v-show="modal.pingLunShow"  class="ui padded modal segment active siXin">
        <i v-on:click="modal.pingLunShow=!modal.pingLunShow" class="icon tiny close" ></i>

        <h3 class="ui horizontal  divider header" style="">评论动态</h3>

        <div v-if="!(pingLunLst.length||articlePingLunLst.length)" class="ui center aligned borderless container siXin none" style="border:none" >
            <span><i style="color:#DCDCDC" class="alarm huge outline icon"></i></span>
        </br></br></br>
            <div style="color:#DCDCDC">还没有动态</div>
        </div>

        <div v-if="pingLunLst.length||articlePingLunLst.length" class="ui container siXin" >
            <div  class="ui segment comments" style="border:none;OVERFLOW-Y: scroll;height:300px">

                <div  class="ui feed">
                  <div v-for="pingLun in pingLunLst" class="event">
                    <div class="label">
                      <img src="{{pingLun.commenter.avatar}}">
                    </div>
                    <div class="content">
                      <div class="date">
                        {{pingLun.createtime}}
                      </div>
                      <div class="summary">
                         <a  @click="prePeopleDetail(pingLun.commenter.id)">{{pingLun.commenter.nickname}}</a> 回复了你在
                         <a v-on:click="detailCard(pingLun.belong_to.belong_to.id)" class="extra text">{{pingLun.belong_to.belong_to.title}}</a>
                         下的评论
                      </div>
                    </div>
                  </div>
                  <div class="ui horizontal divider">文章</div>
                  <div v-for="articlePingLun in articlePingLunLst" class="event">
                    <div class="label">
                      <img src="{{articlePingLun.commenter.avatar}}">
                    </div>
                    <div class="content">
                      <div class="date">
                        {{articlePingLun.createtime}}
                      </div>
                      <div class="summary">
                         <a  @click="prePeopleDetail(articlePingLun.commenter.id)">{{articlePingLun.commenter.nickname}}</a> 评论了你的文章
                         <a v-on:click="detailCard(articlePingLun.belong_to.id)" class="extra text">{{articlePingLun.belong_to.title}}</a>
                      </div>
                    </div>
                  </div>
              </div>
             </div>
        </div>
    </div>

    <div @mouseover="infoShwich1" @mouseout="infoShwich2" id="menu" v-show="modal.info"
    style="left:89%;top:27%;transform: translate(-50%, -50%);width:150px;"
    class="ui popup bottom left transition  fixed menu  borderless vertical animated {{fadeIn}} menu">
      <a v-on:click="inFopage" class="item">
        修改资料
      </a>
      <a @click="write" class="item">
        写文章
      </a>
      <a @click="modal.dongTaiShow=!modal.dongTaiShow,userinfo.dongTaiNum=0,dongTaiNumQingLing(),dongTai()" class="item">
        关注者动态
        <div class="floating ui red label" v-if="userinfo.dongTaiNum">{{userinfo.dongTaiNum}}</div>
      </a>
      <a @click="modal.pingLunShow=!modal.pingLunShow,userinfo.pingLunNum=0,pingLunNumQingLing(),pingLun(),articlePingLun()" class="item">
        评论动态
        <div class="floating ui red label" v-if="userinfo.pingLunNum">{{userinfo.pingLunNum}}</div>
      </a>
      <a @click="modal.zanShow=!modal.zanShow,userinfo.zanNum=0,zanNumQingLing(),zan(),pingLunZan()" class="item">
          谁赞了我
         <!-- <span class="ui icon"><i class="heart icon"></i></span> -->
        <div class="floating ui red label" v-if="userinfo.zanNum">{{userinfo.zanNum}}</div>
      </a>
      <a @click="modal.siXinShow=!modal.siXinShow,userinfo.siXinNum=0,siXinNumQingLing()" class="item">
        私信
        <div class="floating ui red label" v-if="userinfo.siXinNum">{{userinfo.siXinNum}}</div>
      </a>
    </div>





    <div class="ui inverted segment container nav">
        <div class="ui  three borderless  item  menu">
      <a v-on:click="choicecategory('all',1)"  class="item {{ activeone(1) }}">
        All
      </a>
      <a v-on:click="choicecategory('new',2)" class="item {{ activeone(2) }}">
        New
      </a>
      <a v-on:click="choicecategory('editor',3)" class="item {{ activeone(3) }}">
        Editor's
      </a>
     </div>
    </div>





    <div class="ui basic segment container content">
        <div class="ui three column grid">
            <div v-for="video in video_list" class="column">
                <a  class="ui fluid card" >
                    <div class="image">
                        <img v-on:click="detailCard(video.id)" src="{{ video.cover }}" alt="" style="height:200px;object-fit: cover;">
                    </div>
                </a>
                <div class="title header">{{ video.title }}  <a @click="prePeopleDetail(video.owner.id)"
                     href="javascript:;"> <span style="font-size:14px;">{{ video.owner.nickname }}</span></a></div>

                <i class="icon grey unhide"></i>
                <span style="color:#bbbbbb">{{ video.views }}</span>

                <span class="" style="color:rgb(226, 226, 226)">|</span>
                <i class="icon grey checkmark"></i>
                <span style="color:#bbbbbb"> {{ video.likes }}  people got it</span>
            </div>
        </div>
    </div>

    <div class="ui pagination menu" style="margin-left:50%;transform:translate(-50%,0%);margin-bottom:70px;">

       <a v-on:click="update_page(this_page-1)" class="{{ previous_disabled_status() }} item">
           <i class="icon {{ leftcaret_color() }} left caret"></i></a>
       <a  v-for="pagenumber in pages"  v-on:click="update_page(pagenumber+1)"
       class="{{ pagenum_active_status(pagenumber+1) }} item"
       style="{{ pagenum_color(pagenumber+1) }}">
                                   {{ pagenumber+1 }}
       </a>
       <!-- <a v-for="pagenumber in [pagenumber,pagenumber+5] "  v-on:click="update_page(pagenumber+1)"
       class="{{ pagenum_active_status(pagenumber+1) }} item"
       style="{{ pagenum_color(pagenumber+1) }}">
                                   {{ pagenumber+1 }}
       </a> -->
       <a v-on:click="update_page(this_page+1)" class="{{ next_disabled_status() }} item">
           <i class="icon {{ rightcaret_color() }} right caret"></i></a>
    </div>


    <div class="ui vertical very padded red segment">
        <div class="ui grid">
            <div class="four wide column">
                <div class="ui image">
                    <img src="\static\images\ten_red_logo.png" alt="">
                </div>
            </div>

            <div class="four wide column">
                <div class="ui vertical  text menu">
                    <div class="item">
                        <h3 class="ui header">信息</h3>
                    </div>

                    <div class="item">
                        关于10MINs
                    </div>

                    <div class="item">
                        联系我们
                    </div>

                    <div class="item">
                        Blog
                    </div>
                </div>
            </div>

            <div class="four wide column">
                <div class="ui vertical  text menu">
                    <div class="item">
                        <h3 class="ui  header">社交网络</h3>
                    </div>

                    <div class="item">
                        新浪微博
                    </div>

                    <div class="item">
                        微信公众号
                    </div>
                </div>
            </div>

            <div class="four wide column">
                <div class="ui vertical text menu">
                    <div class="item">
                        Designed by
                    </div>
                    <div class="item">
                        <h3 class="ui header logo" style="font-size: 30px;color: rgb(196, 196, 196);">萌面人</h3>
                    </div>
                </div>
            </div>
        </div>
    </div>

<div  v-show="modal.dimmerShow" @click="unSignUp" class="ui dimmer animated fadeIn active"></div>
    <div  v-show="modal.regi_show" class="ui padded modal segment active" >
        <i v-on:click="unSignUp" class="icon tiny close" ></i>

        <div  class="ui grid divided segment container">
            <div class="five wide column">
                <h4 class="ui inverted header">
                    <i class="angle left  icon"></i>
                </h4>
                <h1 class="ui inverted center aligned header" style="font-size: 40px;margin-top:55px">
                    <p class="sub header">
                        Welcome to
                    </p>
                    10MINs
                </h1>

            </div>


<div  class="eleven wide column">
    <h4  class="ui inverted right aligned header">
        <a href="#" v-on:click="modalSwitch_rigeser_login" style="color:#ff695e;">or Login</a>
    </h4>
    <form  class="ui form" >

        <div class="field">
            <label  >手机号码：</label>
            <div   class="ui left icon input">
                <input class="u-txt" required="true" v-model="username" @blur="checkUsername" @click="userChange"  type="tel" placeholder="手机号码">
                  <i class="user icon"></i>
            </div>

            <span   style="color:green;" v-show="modal.usernameCheck"><i class="check green circle icon"></i></span>
            <span   style="color:red;"  v-show="modal.inUsernameCheck"><i class="remove red circle icon"></i>{{invalidUser}}</span>
            <span  style="color:red;"  v-show="modal.endInUsernameCheck"><i class="remove red circle icon"></i>{{endInvalidUser}}</span>
        </div>

        <div class="field">
            <label >密码：</label>
            <div class="ui left icon input">
                <input @blur="checkPassword" @click="passwordChange"  v-model="password" type="password"  placeholder="密码不少于6位">
                <i class="lock icon"></i>
            </div>

            <span  v-show="modal.error_show1" class="ui inverted red " style="color:red;"><i class="remove red circle icon"></i>The password is invalid</span>
            <span   style="color:green;" v-show="modal.error_show2"><i class="check green circle icon"></i></span>
        </div>
        <div class="field">
            <label >重复密码：</label>
            <div class="ui left icon input">
                <input @keydown.enter="affRegister" @blur="checkRePassword" @click="rePswChange" v-model="re_password" type="password"  placeholder="Repeat Password">
                <i class="lock icon"></i>
            </div>
            <span  v-show="modal.error_show" style="color:red;"><i class="remove red circle icon"></i>The two passwords are different</span>
            <span   style="color:green;" v-show="modal.right_show"><i class="check green circle icon"></i></span>
        </div>
    </form>
    <div class="">
        <button v-on:click="affRegister" class="ui inverted red circular right floated button"
        style="margin-top:30px">完成</button>
    </div>
</div>
     </div>
</div>



<div v-if="modal.login_show"  class="ui padded modal segment active" >
    <i v-on:click="unSignUp" class="icon tiny close" ></i>
    <div class="ui grid divided segment container">
        <div class="five wide column">
            <h4 class="ui inverted header">
                <i class="angle left  icon"></i>
            </h4>
            <h1 class="ui inverted center aligned header" style="font-size: 40px;margin-top:55px">
                <p class="sub header">
                    Welcome to
                </p>
                10MINs
            </h1>
        </div>

        <div class="eleven wide column">
            <h4 class="ui inverted right aligned header">
                <a href="#" v-on:click="modalSwitch_rigeser_login" style="color:#ff695e;">or Regiser</a>
            </h4>
        <form class="ui form" >
            <div class="field">
                <label>用户名：</label>
                <div class="ui left icon input">
                    <input v-model="username" type="text" placeholder="Username">
                    <i class="user icon"></i>
                </div>
            </div>
            <div class="field">
                <label>密码：</label>
                <div class="ui left icon input">
                    <input  @keydown.enter="logIn" v-model="password" type="password"  placeholder="Password">
                    <i class="lock icon"></i>
                </div>
            </div>
            <span  v-show="modal.loginCheck" style="color:red;"><i class="remove red circle icon"></i>账号不存在或密码错误</span>

        </form>

<div class="">
<button  @click="logIn"  class="ui inverted red circular right floated button" style="margin-top:30px">登陆</button>
</div>
            </div>
        </div>
    </div>




</body>
{% endverbatim %}
</html>
